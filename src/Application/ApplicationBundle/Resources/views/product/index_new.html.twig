{% extends 'AppApplicationBundle:Default:new_base.html.twig'%}

{% block stylesheet %}	
        <meta charset="UTF-8" />
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link href="{{ asset('public/pages/css/AppApplicationBundle/index.css') }}" rel="stylesheet"/>
        <link href="{{ asset('plugins/flat-admin-bootstrap-templates-master/dist/html/assets/css/vendor.css') }}" rel="stylesheet"/>
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/font-awesome/css/font-awesome.min.css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/css/fontastic.css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- Bootstrap Select CSS-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/bootstrap-select/css/bootstrap-select.min.css">
    <!-- Bootstrap Touchspin CSS-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/bootstrap-touchspin/jquery.bootstrap-touchspin.min.css">
    <!-- Bootstrap Datepicker CSS-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/bootstrap-datepicker/css/bootstrap-datepicker3.css">
    <!-- Bootstrap Tags input CSS-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/bootstrap-tagsinput/bootstrap-tagsinput.css">
    <!-- No UI Slider-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/nouislider/nouislider.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/css/style.default.premium.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/img/favicon.ico">

{% endblock %}

{% block body %} 
{% include 'AppApplicationBundle::product/product_new_pl.html.twig'  %}


    <section class="forms">
        <div class="container-fluid">
          <!-- Page Header-->
          <header> 
            <h1 class="h3 display">Product Data</h1>
          </header>
          <div class="row">
            <div class="col-lg-12">
              <div class="card">
                <div class="card-header d-flex align-items-center">
                  <h4>Product</h4>
                </div>
                <div class="card-body">
                  <div>
                   <button id="testj" type="button" data-toggle="modal" data-target="#myModal" class="btn btn-primary">Export Product Data</button>
                   <button type="button" data-toggle="modal" data-target="#product_new" class="btn btn-primary">Add Product</button>
                  </div>
                  <div class="table-responsive" style="margin-top:35px;">
                    <div id="datatable1_wrapper" class="dataTables_wrapper container-fluid dt-bootstrap4 no-footer" style="padding-left:0px;padding-right:0px;">
                      <div class="row">
                        <div class="col-md-12 col-md-6">
                          <div class="dataTables_length" id="datatable1_length">
                            <table id="datatable1" style="width: 100%;" class="table dataTable no-footer" role="grid" aria-describedby="datatable1_info">
                              <thead>
                                <th style="width:13%">Product Id</th>
                                <th style="width:15%">Name</th>
                                <th style="width:14%">Equity</th>
                                <th style="width:13%">Price</th>
                                <th style="width:20%">Date</th>
                                <th style="width:15%">Status</th>
                                <th style="width:20%"></th>
                               
                              </thead>
                              <tbody>
                                {% for product in products %}
                                    <tr>
                                        <td><a href="{{ path('product_show', { 'id': product.productId }) }}">{{ product.productId }}</a></td>
                                        <td>{{ product.name }}</td>
                                        <td>Rp. {{ product.capital|number_format }}</td>
                                        <td id="price">Rp. {{ product.price|number_format }}</script></td>
                                        <td>{{ product.date|date('Y-m-d H:i:s') }}</td>
                                        <td>{{ product.status }}</td>
                                        <td><i class="fa fa-pencil edit_new" aria-hidden="true" id="{{product.id}}" data-toggle="modal" data-target="#editView"></i><i class="fa fa-trash-o delete_new" aria-hidden="true" id="{{product.id}}" data-toggle="modal" data-target="#deleteView"style="margin-left:20px;"></i></a></td>
                                    </tr>{% include 'AppApplicationBundle::product/edit_new_pl.html.twig'  %}{% include 'AppApplicationBundle::product/delete_new_pl.html.twig'  %}
                                {% endfor %}
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
               </div>
              </div>
        </div>
      </section>
<div id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" class="modal fade text-left" style="display: none;" aria-hidden="true">
                    <div role="document" class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 id="exampleModalLabel" class="modal-title">Export Product Data</h5>
                          <button type="button" data-dismiss="modal" aria-label="Close" class="close"><span aria-hidden="true">Ã—</span></button>
                        </div>
                        <div class="modal-body">
                          <p>Date Range</p>
                          <form>
                            <div class="form-group">
                              <label>Start Date</label>
                             <input type="text" class="form-control input-datepicker" data-provide="datepicker" >
                            </div>
                            <div class="form-group">       
                              <label>End Date</label>
                              <input type="text"  class="form-control input-datepicker" data-provide="datepicker" >
                            </div>
                            <div class="form-group">       
                              <input type="submit" value="Signin" class="btn btn-primary">
                            </div>
                          </form>
                        </div>
                        <div class="modal-footer">
                          <button type="button" data-dismiss="modal" class="btn btn-secondary">Close</button>
                          <button id="testj" type="button" class="btn btn-primary">Save changes</button>
                        </div>
                      </div>
                    </div>
                  </div>

{% endblock %}
{% block javascript %}
    <!-- JavaScript files-->
    <script src="{{ asset('plugins/vendor_new/jquery/jquery.min.js') }}"></script>
    <script src="{{ asset('plugins/vendor_new/popper.js/umd/popper.min.js') }}"> </script>
    <script src="{{ asset('plugins/vendor_new/bootstrap/js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('plugins/js_new/grasp_mobile_progress_circle-1.0.0.min.js') }}"></script>
    <script src="{{ asset('plugins/vendor_new/jquery.cookie/jquery.cookie.js') }}"> </script>
    <script src="{{ asset('plugins/vendor_new/jquery-validation/jquery.validate.min.js') }}"></script>
    <script src="{{ asset('plugins/vendor_new/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js') }}"></script>
    <script src="{{ asset('plugins/js_new/charts-custom.js') }}"></script>


 <!-- Bootstrap Touchspin-->
    <script src="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/bootstrap-touchspin/jquery.bootstrap-touchspin.min.js"></script>
    <!-- Bootstrap No UI Slider-->
    <script src="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/nouislider/nouislider.min.js"></script>
    <!-- Bootstrap DatePicker-->
    <script src="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>

     <!-- Data Tables-->
     <script src="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/js/tables-datatable.js"></script>

    <script src="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/datatables.net/js/jquery.dataTables.js"></script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/datatables.net-bs4/js/dataTables.bootstrap4.js"></script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin-premium/1-4-3/vendor/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
    <!-- Main File-->
    <script src="{{ asset('plugins/js_new/front.js') }}"></script>
    <script>
      $('document').ready(function(){

        $("#addProductNewJS").click(function(){

         
       $("input#productName").val("da");

          var productString = [productName,productType,productEquity,productPrice,productStatus];
          console.log(productString);
          $.ajax({
   		    	url: "{{ path('product_add_newjs') }}",
   		    		async: true,
   		    		type: "GET",
   		    		data: { "purchaseDetails": productString },	
   		    		contentType: "application/json"               
   		    }).done(function (data) {
               console.log(data);


   			  }).fail(function (jqXHR, textStatus, errorThrown) {

   		    });
        });

        $(".fa.fa-pencil.edit_new").click(function(){
          
          var productId = $(this).attr('name');

          $.ajax({
   		    	url: "{{ path('product_edit_form_newjs') }}",
   		    		async: true,
   		    		type: "GET",
   		    		data: { "productId": productId },	
   		    		contentType: "application/json"               
   		    }).done(function (data) {
               console.log(data.message);
               var dataProduct = data;               
               $("input#productId").val(data.message[0]);
               $("input#productName").val(data.message[1]);
               $("select#productType").val(data.message[2]);
               $("input#productEquity").val(data.message[3]);
               $("input#productPrice").val(data.message[4]);
               $("input#productStatus").val(data.message[5]);
   			  }).fail(function (jqXHR, textStatus, errorThrown) {

   		    });
          
        });

        $("#editProductNewJS").click(function(){
          var productId = $("input#productId")[1].value;
          var productName = $("input#productName")[1].value;
          var productType = $("select[name='productType']").val();
          var productEquity = parseInt($("input#productEquity")[1].value);
          var productPrice = parseInt($("input#productPrice")[1].value);
          var productStatus = $("select[name='productStatus']").val();

          var productListField = [productId, productName, productType, productEquity, productPrice, productStatus];
           console.log(productListField);
          $.ajax({
   		    	url: "{{ path('product_edit_submit_form_newjs') }}",
   		    		async: true,
   		    		type: "GET",
   		    		data: { "productListField": productListField },	
   		    		contentType: "application/json"               
   		    }).done(function (data) {
            console.log("success")
            window.location.href = "{{ path('product_index_new') }}";         
   			  }).fail(function (jqXHR, textStatus, errorThrown) {

   		    });        
        });

        $("#deleteProductJs").click(function(){
          
          var productId = $(this).attr('name');
          console.log(productId);
          $.ajax({
   		    	url: "{{ path('product_delete_submit_form_newjs') }}",
   		    		async: true,
   		    		type: "GET",
   		    		data: { "productId": productId },	
   		    		contentType: "application/json"               
   		    }).done(function (data) {
               window.location.href = "{{ path('product_index_new') }}";    
               
   			  }).fail(function (jqXHR, textStatus, errorThrown) {

   		    });
          
        });


      });
    </script>
    {% endblock %}

